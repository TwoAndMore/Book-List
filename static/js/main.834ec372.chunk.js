(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{19:function(t,e,n){},20:function(t,e,n){},21:function(t,e,n){},23:function(t,e,n){},24:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){"use strict";n.r(e);var c=n(1),r=n.n(c),o=n(12),a=n.n(o),s=n(5),i=(n(19),n(3)),j=(n(20),n(2)),l=(n(21),n(8)),u=n.n(l),b=n(0),d=function(t){var e=t.to,n=t.text;return Object(b.jsx)(s.c,{to:e,className:function(t){var e=t.isActive;return u()("navbar__item",{"navbar__item--active":e})},children:n})},h=function(){return Object(b.jsx)("nav",{className:"navbar page__section",children:Object(b.jsxs)("ul",{className:"navbar__list",children:[Object(b.jsx)(d,{to:"/",text:"DashBoard"}),Object(b.jsx)(d,{to:"/addABook",text:"Add a Book"})]})})},O=(n(23),"http://localhost:5000");function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c={method:e};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),fetch(O+t,c).then((function(t){if(!t.ok)throw new Error;return t.json()}))}var x,m=function(t){return f(t)},p=function(t,e){return f(t,"POST",e)},v=function(t,e){return f(t,"PATCH",e)},_=function(t){return f(t,"DELETE")},k=(n(24),function(){return Object(b.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(b.jsx)("div",{className:"Loader__content"})})}),g=function(t){var e=t.books,n=t.isBooksLoading,c=t.setBooks,r=function(t){(function(t){return _("/books/".concat(t))})(t).then((function(){c((function(e){return e.filter((function(e){return e.id!==t}))}))}))};return Object(b.jsx)("section",{className:"page__section dashboard",children:n?Object(b.jsx)(k,{}):Object(b.jsx)(b.Fragment,{children:e.length<=0?Object(b.jsx)("p",{children:"There is no books on the server/ Server Error"}):Object(b.jsxs)("table",{className:"dashboard__table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Title"}),Object(b.jsx)("th",{children:"Author"}),Object(b.jsx)("th",{children:"Category"}),Object(b.jsx)("th",{children:"ISBN"}),Object(b.jsx)("th",{children:"Actions"})]})}),Object(b.jsx)("tbody",{children:e.map((function(t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:t.title}),Object(b.jsx)("td",{children:t.author}),Object(b.jsx)("td",{children:t.category}),Object(b.jsx)("td",{children:t.isbn}),Object(b.jsxs)("td",{children:[Object(b.jsx)(s.b,{to:"/addABook/".concat(t.id),className:"dashboard__link",children:Object(b.jsx)("button",{type:"button",className:"dashboard__button",children:"Edit"})}),Object(b.jsx)("button",{type:"button",className:"dashboard__button dashboard__button--red",onClick:function(){return r(t.id)},children:"Delete"})]})]},t.id)}))})]})})})},y=n(10),B=n.n(y),N=n(14),S=n(13),C=n(11),A=(n(26),function(t){var e=t.value,n=t.label,r=t.type,o=t.required,a=void 0!==o&&o,s=t.onChange,j=void 0===s?function(){}:s,l=Object(c.useState)((function(){return"".concat(n).concat(Math.random().toString().slice(2))})),d=Object(i.a)(l,1)[0],h=Object(c.useState)(!1),O=Object(i.a)(h,2),f=O[0],x=O[1],m=f&&a&&!e;return Object(b.jsxs)("div",{className:"addBook__field",children:[Object(b.jsx)("label",{className:"addBook__label",htmlFor:d,children:n}),Object(b.jsx)("input",{id:d,className:u()("addBook__input",{"addBook__input--empty":m}),type:r,placeholder:"Enter ".concat(n),value:e,onChange:function(t){return j(t.target.value)},onBlur:function(){return x(!0)}}),m&&Object(b.jsx)("p",{className:"addBook__error",children:"".concat(n," is required")})]})});!function(t){t.Horror="Horror",t.DAM="Detective and Mystery",t.Fantasy="Fantasy",t.Classics="Classics"}(x||(x={}));var E=function(t){var e=t.books,n=t.setBooks,r=Object(c.useState)(""),o=Object(i.a)(r,2),a=o[0],s=o[1],l=Object(c.useState)(""),u=Object(i.a)(l,2),d=u[0],h=u[1],O=Object(c.useState)("".concat(x.Classics)),f=Object(i.a)(O,2),m=f[0],_=f[1],k=Object(c.useState)(0),g=Object(i.a)(k,2),y=g[0],E=g[1],T=Object(c.useState)(!1),w=Object(i.a)(T,2),D=w[0],F=w[1],I=Object(j.g)(),M=Object(j.h)().bookID,q=void 0===M?"":M,H=q.length>0,L=function(t,e,c,r,o){(function(t,e){return v("/books/".concat(t),e)})(t,{title:e,author:c,category:r,isbn:o}).then((function(){return n((function(n){return n.map((function(n){return n.id===t?Object(C.a)(Object(C.a)({},n),{},{title:e,author:c,category:r,isbn:o}):n}))}))})).finally((function(){return F(!0)}))},J=function(){var t=Object(S.a)(B.a.mark((function t(c,r,o,a,s){var i,j,l;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),i=-e.length,j={id:i,newTitle:r,newAuthor:o,newCategory:a,newISBN:s},n((function(t){return[].concat(Object(N.a)(t),[j])})),t.next=6,(u={title:r,author:o,category:a,isbn:s},p("/books",u)).finally((function(){return F(!0)}));case 6:l=t.sent,n((function(t){return t.map((function(t){return t.id===i?l:t}))}));case 8:case"end":return t.stop()}var u}),t)})));return function(e,n,c,r,o){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){if(H){var t=e.find((function(t){return t.id===+q}));if(!t)return;s(t.title),h(t.author),E(t.isbn),_(t.category)}}),[]);return Object(b.jsx)("section",{className:"page__section addBook",children:Object(b.jsxs)("form",{className:"addBook__form",onSubmit:function(t){H?L(+q,a,d,m,y):J(t,a,d,m,y),setTimeout((function(){I("/")}),300),s(""),h(""),_(""),E(0)},children:[Object(b.jsx)(A,{label:"Title",value:a,type:"text",onChange:s,required:!0}),Object(b.jsx)(A,{label:"Author",type:"text",value:d,onChange:h,required:!0}),Object(b.jsx)(A,{label:"ISBN",type:"number",value:y.toString(),required:!0,onChange:function(t){return E(+t)}}),Object(b.jsx)("label",{className:"addBook__label",htmlFor:"11",children:"Category"}),Object(b.jsxs)("select",{id:"11",className:"addBook__select",value:m,onChange:function(t){return _(t.target.value)},children:[Object(b.jsx)("option",{value:x.Classics,children:"Classics"}),Object(b.jsx)("option",{value:x.Horror,children:"Horror"}),Object(b.jsx)("option",{value:x.DAM,children:"Detective / Mystery"}),Object(b.jsx)("option",{value:x.Fantasy,children:"Fantasy"})]}),Object(b.jsx)("button",{type:"submit",className:"addBook__button",disabled:!(!(a.trim().length<=0)&&!(d.trim().length<=0)&&!(y.toString().trim().length<=0)),children:"Add a Book"}),D&&Object(b.jsx)("p",{className:"addBook__message",children:"Success"})]})})},T=function(){var t=Object(c.useState)([]),e=Object(i.a)(t,2),n=e[0],r=e[1],o=Object(c.useState)(!1),a=Object(i.a)(o,2),s=a[0],l=a[1];return Object(c.useEffect)((function(){l(!0),m("/books").then(r).finally((function(){return l(!1)}))}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(h,{}),Object(b.jsx)("div",{className:"main page",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)(j.d,{children:[Object(b.jsx)(j.b,{path:"/",element:Object(b.jsx)(g,{books:n,setBooks:r,isBooksLoading:s})}),Object(b.jsx)(j.b,{path:"/home",element:Object(b.jsx)(j.a,{to:"/",replace:!0})}),Object(b.jsxs)(j.b,{path:"/addABook",children:[Object(b.jsx)(j.b,{index:!0,element:Object(b.jsx)(E,{books:n,setBooks:r})}),Object(b.jsx)(j.b,{path:":bookID",element:Object(b.jsx)(E,{books:n,setBooks:r})})]}),Object(b.jsx)(j.b,{path:"*",element:Object(b.jsx)("h1",{children:"Error :("})})]})})})]})};a.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(s.a,{children:Object(b.jsx)(T,{})})}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.834ec372.chunk.js.map